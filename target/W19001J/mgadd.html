<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
	<title>layout 后台大布局 - Layui</title>
	<link rel="stylesheet" href="layui/css/layui.css">
	<link rel="stylesheet" href="css/bootstrap.min.css">
</head>

<body class="layui-layout-body">
	<div class="layui-layout layui-layout-admin">
		<div class="layui-header">
			<div class="layui-logo layui-bg-gray">layui 后台布局</div>
			<ul class="layui-nav layui-layout-left">
				<li class="layui-nav-item"><a href="">控制台</a></li>
				<li class="layui-nav-item"><a href="">商品管理</a></li>
				<li class="layui-nav-item"><a href="">用户</a></li>
				<li class="layui-nav-item">
					<a href="javascript:;">其它系统</a>
					<dl class="layui-nav-child">
						<dd><a href="">邮件管理</a></dd>
						<dd><a href="">消息管理</a></dd>
						<dd><a href="">授权管理</a></dd>
					</dl>
				</li>
			</ul>
			<ul class="layui-nav layui-layout-right">
				<li class="layui-nav-item">
					<a href="javascript:;">
						<img src="http://t.cn/RCzsdCq" class="layui-nav-img">
						贤心
					</a>
					<dl class="layui-nav-child">
						<dd><a href="">基本资料</a></dd>
						<dd><a href="">安全设置</a></dd>
					</dl>
				</li>
				<li class="layui-nav-item"><a href="">退了</a></li>
			</ul>
		</div>

		<div class="layui-side layui-bg-black">
			<div class="layui-side-scroll">
				<!-- 左侧导航区域（可配合layui已有的垂直导航） -->
				<ul class="layui-nav layui-nav-tree" lay-filter="test">
					<li class="layui-nav-item layui-nav-itemed">
						<a class="" href="mg.html">所有电影</a>
					</li>

					<li class="layui-nav-item"><a href="">新增电影</a></li>
				</ul>
			</div>
		</div>

		<div class="layui-body">
			<!-- 内容主体区域 -->
			<div style="padding: 15px;">
				<form class="layui-form" action="">
					<div class="layui-form-item">
						<label class="layui-form-label">电影名</label>
						<div class="layui-input-inline">
							<input type="text" name="title" required lay-verify="required" placeholder="请输入电影名"
								autocomplete="off" class="layui-input" id="foname">
						</div>
					</div>
					<div class="layui-form-item">
						<label class="layui-form-label">译名</label>
						<div class="layui-input-inline">
							<input type="text" name="password" required lay-verify="required" placeholder="请输入译名"
								autocomplete="off" class="layui-input" id="ftname">
						</div>
					</div>
					<div class="layui-form-item layui-form-text">
						<label class="layui-form-label">类型</label>
						<div class="layui-input-block">
							<textarea name="desc" placeholder="请输入类型" class="layui-textarea" id="ftype"></textarea>
						</div>
					</div>
					<div class="layui-form-item">
						<label class="layui-form-label">语言</label>
						<div class="layui-input-inline">
							<select name="langue" lay-verify="required" id="langue">
								<option value=""></option>
								<option value="英语">英语</option>
								<option value="中文">中文</option>
								<option value="法语">法语</option>
								<option value="俄语">俄语</option>
								<option value="韩语">韩语</option>
							</select>
						</div>
					</div>
					<div class="layui-form-item">
						<label class="layui-form-label">产地</label>
						<div class="layui-input-inline">
							<select name="langue" lay-verify="required" id="origin">
								<option value=""></option>
								<option value="中国">中国</option>
								<option value="美国">美国</option>
								<option value="韩国">韩国</option>
								<option value="日本">日本</option>
								<option value="西班牙">西班牙</option>
							</select>
						</div>
					</div>
					<div class="layui-form-item">
						<label class="layui-form-label">导演</label>
						<div class="layui-input-inline">
							<input type="text" name="title" required lay-verify="required" placeholder="请输入导演"
								autocomplete="off" class="layui-input" id="director">
						</div>
					</div>
					<div class="layui-form-item">
						<label class="layui-form-label">次数</label>
						<div class="layui-input-inline">
							<input type="text" name="title" required lay-verify="required" placeholder="请输入浏览次数"
								autocomplete="off" class="layui-input" id="browse">
						</div>
					</div>
					<div class="layui-form-item">
						<label class="layui-form-label">编剧</label>
						<div class="layui-input-inline">
							<input type="text" name="title" required lay-verify="required" placeholder="请输入编剧"
								autocomplete="off" class="layui-input" id="writers">
						</div>
					</div>
					<div class="layui-form-item">
						<label class="layui-form-mid">上映时间</label>
						<div class="layui-inline">
							<!-- 注意：这一层元素并不是必须的 -->
							<input type="text" class="layui-input" id="show">
						</div>
					</div>
					<div class="layui-form-item">
						<label class="layui-form-mid">发布时间</label>
						<div class="layui-inline">
							<!-- 注意：这一层元素并不是必须的 -->
							<input type="text" class="layui-input" id="publish">
						</div>
					</div>
					<div class="layui-form-item layui-form-text">
						<label class="layui-form-label">演员</label>
						<div class="layui-input-block">
							<textarea name="desc" placeholder="请输入演员" class="layui-textarea" id="actor"></textarea>
						</div>
					</div>
					<div class="layui-form-item layui-form-text">
						<label class="layui-form-label">简介</label>
						<div class="layui-input-block">
							<textarea name="desc" placeholder="请输入简介" class="layui-textarea" id="intro"></textarea>
						</div>
					</div>

					<div class="layui-form-item">
						<label class="layui-form-label">资源</label>
						<div class="layui-input-inline">
							<input type="text" name="password" required lay-verify="required" placeholder="请输入资源"
								autocomplete="off" class="layui-input" id="fres">
						</div>
					</div>






					<div class="layui-form-item">
						<div class="layui-input-block">
							<button class="layui-btn" type="button" lay-filter="formDemo" onclick="add()">立即提交</button>
							<button type="reset" class="layui-btn layui-btn-primary">重置</button>
						</div>
					</div>
				</form>
				<form id="form1" action="Mg" method="post" enctype="multipart/form-data">
					<div class="layui-input-inline">
							<label class="layui-form-label">图片id</label>
						<input type="text" name="picid" required lay-verify="required" placeholder="请输入id"
								autocomplete="off" class="layui-input" id="picid">
					</div>
					<div class="form-group">
						<label for="photo">照片</label>
						<!--这里面name为photo，在servlet中getPart方法来识别.-->
						<input type="file" class="form-control-file" name="photo" id="photo" placeholder="请上传照片"> <small
							id="fileHelpId" class="form-text text-muted">请上传20X20大小的照片</small>
					</div>
					<input type="hidden" value="addpic" name="type">
					<button type="button" name="save" id="btn" class="btn btn-primary btn-sm" onclick="addpic()">保存</button>

				</form>

			</div>
		</div>

		<div class="layui-footer">
			<!-- 底部固定区域 -->
			© 千影 - 管理系统
		</div>
	</div>
	<script src="layui/layui.js"></script>
	<script type="text/javascript" src="js/jquery-3.3.1.min.js"></script>
	<script type="text/javascript" src="js/popper.min.js"></script>
	<script type="text/javascript" src="js/bootstrap.min.js"></script>
	<script>
		//JavaScript代码区域
		layui.use('element', function () {
			var element = layui.element;

		});
		layui.use('form', function () {
			var form = layui.form;
			//监听提交
			form.on('submit(formDemo)', function (data) {
				layer.msg(JSON.stringify(data.field));
				return false;
			});
		});
		layui.use('laydate', function () {
			var laydate = layui.laydate;

			//执行一个laydate实例
			laydate.render({
				elem: '#show' //指定元素
			});
		});
		layui.use('laydate', function () {
			var laydate = layui.laydate;

			//执行一个laydate实例
			laydate.render({
				elem: '#publish' //指定元素
			});
		});
		function add() {
			let foname = $('#foname').val();
			let ftname = $('#ftname').val();
			let type_value = $('#ftype').val();
			let langue = $('#langue option:selected').val();
			let origin = $('#origin option:selected').val();
			let director = $('#director').val();
			let browse = $('#browse').val();
			let writers = $('#writers').val();
			let show = $('#show').val();
			let publish = $('#publish').val();
			let actor = $('#actor').val();
			let intro = $('#intro').val();
			let picid = $('#picid').val();
			let fres = $('#fres').val();
			$.ajax({
				method: 'post',
				url: 'Mg',
				data: {
					'type': "add",
					'foname': foname,
					'ftname': ftname,
					'type_value': type_value,
					'langue': langue,
					'origin': origin,
					'director': director,
					'browse': browse,
					'writers': writers,
					'show': show,
					'publish': publish,
					'actor': actor,
					'intro': intro,
					'picid':picid,
					'fres':fres
				},
				success: function (data) {
					console.log(data);
					if (data == "2") {
						layer.msg('添加成功');
					} else {
						layer.msg('添加失败！');
					}
				},
				dataType: 'json'
			});

		}
		function addpic(){
			let from = document.querySelector('#form1');
			let fromdata = new FormData(from);
			$.ajax({
				method: 'post',
				url: 'Mg',
				data: fromdata,
				success: function (data) {
					console.log(data);
					if (data == "1") {
						layer.msg('保存成功');
					} else {
						layer.msg('保存失败！');
					}
				},
				contentType:false,
				processData:false,
				dataType: 'text'
			});
		}

	</script>
</body>

</html>